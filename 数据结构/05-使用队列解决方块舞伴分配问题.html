<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        ul li {
            list-style: none;
            text-align: center;
            margin-top: 10px;
        }

        div {
            width: 300px;
            height: 400px;
            float: left;
            margin: 10px 40px;
            border: 5px solid rgb(121, 119, 119);
        }

        h3 {
            text-align: center;
        }
    </style>
</head>

<body>

    <!-- 女性 -->
    <div class="female">
        <h3>女性舞者</h3>
        <ul>
            <li></li>
        </ul>
    </div>
    <!-- 男性 -->
    <div class="male">
        <h3>男性舞者</h3>
        <ul>
            <li>

            </li>
        </ul>
    </div>

    <div class="dance">
        <h3>舞蹈搭档匹配</h3>
        <ul>
            <li></li>
        </ul>
    </div>

    <script src="./Dancer.js"></script>
    <script>
        let females = document.querySelector(".female");
        let males = document.querySelector(".male");
        let danCp = document.querySelector(".dance")

        function Queue() {
            this.dataStore = [];
            this.enqueue = enqueue;
            this.dequeue = dequeue;
            this.front = front;
            this.back = back;
            this.toString = toString;
            this.empty = empty;
        }
        // enqueue方法向队尾添加一个元素
        function enqueue(element) {
            this.dataStore.push(element);
        }
        // dequeue方法删除队首的元素
        function dequeue() {
            return this.dataStore.shift();
        }
        // 使用如下方法读取队首和队尾的元素
        function front() {
            return this.dataStore[0];
        }

        function back() {
            return this.dataStore[this.dataStore.length - 1];
        }
        // 使用toString方法显示队列内的所有元素
        function toString() {
            let reStr = '';
            for (const r of this.dataStore) {
                reStr += r + "\n";
            }
            return reStr;
        }
        // 最后定义一个方法判断队列是否为空
        function empty() {
            if (this.dataStore.length == 0) {
                return true;
            } else {
                return false;
            };
        }

        // 定义一个构造函数 生成Dancer对象
        class Dancer {
            constructor(name, sex) {
                this.name = name;
                this.sex = sex;
            }
        }
        // console.log(dancer);
        // 生成一个男队列 一个女队列
        let nan = new Queue();
        let nv = new Queue();

        // 将所有的舞者遍历添加到队列
        dancer.forEach((items, index) => {
            let name = items.name;
            let sex = items.sex;
            if (sex == "F") {
                let li = document.createElement("li");
                li.innerText = `序号${index}---姓名：${name}`
                males.querySelector("ul").appendChild(li);
                let d = new Dancer(name, sex)
                // 创建对应实例，存入队列
                nan.enqueue(d);
            } else {
                let li = document.createElement("li");
                li.innerText = `序号${index}---姓名：${name}`
                females.querySelector("ul").appendChild(li);
                let d = new Dancer(name, sex)
                nv.enqueue(d);
            }
        })

        // console.log(nv.dataStore);
        // console.log(nan.dataStore);

        // 下一个函数将男性和女性组成舞伴，并且配对结果

        function dance(nan, nv) {
            // 如果男和女队列都不为空，那么就进行配对
            let TimeID = setInterval(() => {
                if (!nan.empty() && !nv.empty()) {
                    let name1 = nan.dequeue().name
                    let name2 = nv.dequeue().name
                    let li = document.createElement("li");
                    li.innerText = `${name1}的伴侣是${name2}`
                    danCp.querySelector("ul").appendChild(li);
                } else {
                    clearInterval(TimeID)
                }
            }, 1000)
        }
        dance(nan, nv);
    </script>
</body>

</html>