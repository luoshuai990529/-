<!--
 * @Date: 2022-01-07 23:58:47
 * @LastEditors: Lewis
 * @LastEditTime: 2022-01-07 23:58:47
  -->

#《重构改善即有的代码设计第2版》

### 第一章：重构，第一个示例

- 如果你要给程序添加一个特性，但发现代码因缺失良好的结构而不易于进行更改，那就先重构那个程序，使其比较容易添加该特性，然后再添加该特性
- 重构之前先检查自己是否有一套可靠的测试集，这些测试必须有自我检验能力（构建测试体系对重构来说太重要了，将在第四章讨论）
- 好代码检验的标准就是人们是否能够轻而易举的修改它

## 第二章：重构的原则

- 如果有人说他们的代码在重构的过程中有一两天的时间不可用，基本可以确定，他们在做的事情不是重构( **因此重构的关键在于运用大量微小且保持软件行为的步骤，一步步达到大规模的修改。每个单独的重构要么很小要么由若干个小步骤组合而成，这样的重构过程，代码才可以很少进入不可工作的状态** )

- 何时重构？

  - **三次法则**：第一次做事情的时候只管去做；第二次做类似的事情的时候会产生反感，但无论如何还是可以去做；第三次再做类似的事时，你就应该重构；即事不过三，三则重构。
  - **预备性重构：让添加新功能更加容易。**重构的最佳时期就是在添加新功能之前，在动手添加新功能之前我会看看现有的代码库，如果对代码结构做一些微调那么或许接下来的工作会变得容易的多。我们在修复bug时的情况也是一样，在寻找问题的根因时会发现，如果把三段一模一样的会导致错误的代码合并到一起，修复问题起来会容易的多。或者如果把某些更新和查询的逻辑分开，会更容易避免错误的逻辑纠缠。用重构改善这些情况，同样场合出现bug的几率也会变低
  - **帮助理解的重构：让代码更易懂。**重构带来的好处不仅仅发生在将来，常常是立竿见影。比如先在一些小细节上做一些重构，给一两个变量改名，让他们更清楚的表达意图，以方便理解或者是将一个长函数拆成几个小函数，当代码变得清晰了之后我们就会看到之前看不见的设计问题。

  ​



