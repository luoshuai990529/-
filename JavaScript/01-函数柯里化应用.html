<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      /* 
			什么是柯里化（ curry）?
				柯里化是一种将使用多个参数的一个函数转换成一系列使用一个参数的函数的技术

			柯里化实际是把简答的问题复杂化了，但是复杂化的同时，我们在使用函数时拥有了更加多的自由度。 
			而这里对于函数参数的自由处理，正是柯里化的核心所在。 柯里化本质上是降低通用性，提高适用性。
		
		*/

      const fn = function fn(a, b, c, d, e) {
        return [a, b, c, d, e].reduce((a, b) => {
          return a + b;
        });
      };
      const result = fn(1, 2, 3, 4, 5);
      console.log('result-', result);

      /**
       * 将函数柯里化
       * @param fn    待柯里化的原函数
       * @param len   所需的参数个数，默认为原函数的形参个数
       */
      function curry(fn, len = fn.length) {
        return _curry.call(this, fn, len);
      }
      /**
       * 中转函数
       * @param fn    待柯里化的原函数
       * @param len   所需的参数个数
       * @param args  已接收的参数列表
       */
      function _curry(fn, len, ...args) {
        return function (...params) {
          let _args = [...args, ...params];

		  if (_args.length >= len) {
			  // 达到原函数的参数 就返回结果
			  return fn.apply(this, _args);
			} else {
			  // 如果当前的参数长度，还是没有原函数接收参数的长度 那么就继续返回一个函数
            return _curry.call(this, fn, len, ..._args);
          }
        };
      }

      const curryFn = curry(fn);
	  const curryRes = curryFn(1, 2)(3)(4)(5)
      console.log('curryRes---',curryRes);
    </script>
  </body>
</html>
