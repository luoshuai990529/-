<!--
 * @Author: Lewis
 * @Date: 2021-10-07 23:14:05
 * @LastEditTime: 2021-12-20 19:19:07
 * @LastEditors: luoshuai
 * @Description: 函数柯里化
 * @FilePath: 
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      /* 
			什么是柯里化（ curry）?
				柯里化是一种将使用多个参数的一个函数转换成一系列使用一个参数的函数的技术 即 fn(1,2,3,4) 转化为 fn(1)(2)(3)(4)

			柯里化实际是把简答的问题复杂化了，但是复杂化的同时，我们在使用函数时拥有了更加多的自由度。 
			而这里对于函数参数的自由处理，正是柯里化的核心所在。 柯里化本质上是降低通用性，提高适用性。
		
		*/

      const fn = function fn(a, b, c, d, e) {
        return [a, b, c, d, e].reduce((a, b) => {
          return a + b;
        });
      };
      const result = fn(1, 2, 3, 4, 5);
      console.log("result-", result);

      /**
       * @description: 来自 30 seconds of code 的柯里化函数
       * @param {*}
       * @return {*}
       * 
       */
      const curry = (fn, arity = fn.length, ...args) => {
        return arity <= args.length ? fn(...args) : curry.bind(null, fn, arity, ...args);
      }

      // 示例
      const res1 = curry(Math.pow)(2)(10); // 1024
      const res2 = curry(Math.min, 3)(10)(50)(2); // 2
      console.log("res1-", res1);
      console.log("res2-", res2);
      // 使用curry函数 柯里化fn
      const curryFn = curry(fn)(1)(2)(3)(4)(5)
      const curryFn2 = curry(fn,5)(1)(2)(3)(4)(5)
      console.log("curryFn---",curryFn);
      console.log("curryFn2---",curryFn2);

      /**
       * @description: 传入一个被校验的值 和正则，通过则返回这个值 不通过则返回null
       * @param { RegExp } 正则
       * @param { val } 被校验的值
       * @return {*}
       * 
       */
      const validator = (reg, val) => {
        return reg.test(val) ? val : null
      }
      // 将validator函数 柯里化
      const phoneReg = /1\d{10}/
      const val = 18374723577
      // 将原本接收两个值的validator 变成 接收一个参数的函数
      const validatorCurry = curry(validator)
      const validatorResult = validatorCurry(phoneReg)(val)
      console.log("validatorResult----", validatorResult);
    </script>
  </body>
</html>
